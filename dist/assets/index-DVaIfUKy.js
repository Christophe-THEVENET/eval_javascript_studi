var d=Object.defineProperty;var u=(i,e,a)=>e in i?d(i,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[e]=a;var l=(i,e,a)=>u(i,typeof e!="symbol"?e+"":e,a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}})();class n{constructor(){this.elSoundBtn=document.querySelector(".btn-sound"),this.init()}init(){this.watchChoiceSoundOn()}watchChoiceSoundOn(){this.elSoundBtn.addEventListener("click",()=>{window.app.sound===!0?(window.app.sound=!1,this.elSoundBtn.textContent="son (off)"):(window.app.sound=!0,this.elSoundBtn.textContent="son (on)")})}playSound(e,a=.3){let o=new Audio(`src/sound/${e}`);window.app.sound===!0?(o.play(),o.volume=a):o.pause()}}class h{constructor(e,a){l(this,"getName",()=>this.name);l(this,"getRound",()=>this.round);l(this,"getGlobal",()=>this.global);l(this,"setRound",e=>this.round+=e);l(this,"setGlobal",e=>this.global+=e);l(this,"setRound0",()=>this.round=0);l(this,"setGlobal0",()=>this.global=0);l(this,"showPlayerName",e=>{e.textContent=this.name});l(this,"activePlayer",()=>{this.img.classList.add("img-active"),this.inGame=!0});l(this,"unactivePlayer",()=>{this.img.classList.remove("img-active"),this.inGame=!1});l(this,"flashWin",e=>{e.classList.add("flash-win"),setTimeout(()=>{e.classList.remove("flash-win")},1e3)});l(this,"flashLose",e=>{e.classList.add("flash-lose"),setTimeout(()=>{e.classList.remove("flash-lose")},1e3)});l(this,"flash",()=>{setInterval(()=>{title.classList.add("flash-win"),setTimeout(()=>{title.classList.remove("flash-win")},200)},600)});l(this,"progressBar",(e,a)=>{let t=100/document.querySelector("#win-score-input").value,s=0;s+=t*e,a.style.width=`${s}%`});this.name=e,this.round=0,this.global=0,this.img=a,this.inGame=!1}}class y{constructor(){window.app.gameStarted=!0,this.player1Name=document.querySelector("#player1-input").value,this.player2Name=document.querySelector("#player2-input").value,this.scoreToWin=document.querySelector("#win-score-input").value,this.elTitleText=document.querySelector("#title"),this.elDiceRollBtn=document.querySelector(".btn-roll-js"),this.elDice=document.querySelector(".dice-all"),this.elHoldScoreBtn=document.querySelector(".btn-hold-js"),this.elScoreToWinText=document.querySelector("#win-score-output"),this.elPlayer1NameText=document.querySelector("#player1-output"),this.elPlayer1ProgressBar=document.querySelector(".progress-bar-p1"),this.elPlayer1Img=document.querySelector("#player1-img"),this.elPlayer2NameText=document.querySelector("#player2-output"),this.elPlayer2Img=document.querySelector("#player2-img"),this.elPlayer2ProgressBar=document.querySelector(".progress-bar-p2"),this.elPlayer1RoundText=document.querySelector("#player1-round"),this.elPlayer2RoundText=document.querySelector("#player2-round"),this.elPlayer1GlobalText=document.querySelector("#player1-global"),this.elPlayer2GlobalText=document.querySelector("#player2-global"),this.player1=new h(this.player1Name,this.elPlayer1Img),this.player2=new h(this.player2Name,this.elPlayer2Img),this.elVideoPlayer1Section=document.getElementById("videoBloc1"),this.elVideoPlayer1=document.getElementById("videoPlayer1"),this.elVideoPlayer2Section=document.getElementById("videoBloc2"),this.elVideoPlayer2=document.getElementById("videoPlayer2"),this.sound=new n,this.init()}init(){this.elDiceRollBtn.classList.add("btn-insist"),this.player1.activePlayer(),this.playSoundAtStartGame(),this.showGameParams(),this.resetScores(),this.watchDiceRoll(),this.watchHoldScore()}playSoundAtStartGame(){this.sound.playSound("intro.mp3",.2),setTimeout(()=>{this.sound.playSound("round.mp3",.2)},500),setTimeout(()=>{this.sound.playSound("fight.mp3",.2)},1500)}showGameParams(){this.elScoreToWinText.textContent=`score a atteindre (${this.scoreToWin})`,this.player1.showPlayerName(this.elPlayer1NameText),this.player2.showPlayerName(this.elPlayer2NameText)}resetScores(){this.player1.setRound0(),this.player2.setRound0(),this.player1.setGlobal0(),this.player2.setGlobal0(),this.elPlayer1RoundText.textContent=this.player1.getRound(),this.elPlayer2RoundText.textContent=this.player2.getRound(),this.elPlayer1GlobalText.textContent=this.player1.getGlobal(),this.elPlayer2GlobalText.textContent=this.player2.getGlobal()}changePlayer(){this.player1.inGame===!0?(this.player1.inGame=!1,this.player2.inGame=!0,this.player1.unactivePlayer(),this.player2.activePlayer(),this.sound.playSound("switch1.wav",.2)):(this.player1.inGame=!0,this.player2.inGame=!1,this.player1.activePlayer(),this.player2.unactivePlayer(),this.sound.playSound("switch1.wav",.2))}watchDiceRoll(){window.app.gameStarted&&this.elDiceRollBtn.addEventListener("click",()=>{this.elDiceRollBtn.classList.remove("btn-insist");let e=Math.floor(Math.random()*6)+1;this.elDice.dataset.side=e,this.elDice.classList.toggle("reRoll"),this.sound.playSound("dice.mp3",.7),this.player1.inGame&&e===1?(this.player1.setRound0(),this.elPlayer1RoundText.textContent=this.player1.getRound(),this.player1.flashLose(this.elPlayer1RoundText),this.player1.flashLose(this.elTitleText),this.changePlayer(),this.sound.playSound("dieguy.wav",.2),this.sound.playSound("dice-one.wav",.2)):this.player1.inGame&&e!==1?(this.player1.setRound(e),this.elPlayer1RoundText.textContent=this.player1.getRound(),this.player1.flashWin(this.elPlayer1RoundText),this.sound.playSound("ryuken-hadooken.mp3",.1)):this.player2.inGame&&e===1?(this.player2.setRound0(),this.elPlayer2RoundText.textContent=this.player2.getRound(),this.player2.flashLose(this.elPlayer2RoundText),this.player2.flashLose(this.elTitleText),this.changePlayer(),this.sound.playSound("diegirl.wav",.2),this.sound.playSound("dice-one.wav",.2)):this.player2.inGame&&e!==1&&(this.player2.setRound(e),this.elPlayer2RoundText.textContent=this.player2.getRound(),this.player2.flashWin(this.elPlayer2RoundText),this.sound.playSound("chun-li-yap.mp3",.1))})}watchHoldScore(){window.app.gameStarted&&this.elHoldScoreBtn.addEventListener("click",()=>{this.player1.inGame?(this.sound.playSound("ryuken-kick.mp3",.1),this.player1.setGlobal(this.player1.getRound()),this.player1.setRound0(),this.elPlayer1GlobalText.textContent=this.player1.getGlobal(),this.elPlayer1RoundText.textContent=this.player1.getRound(),this.player1.flashWin(this.elPlayer1GlobalText),this.player1.progressBar(this.player1.getGlobal(),this.elPlayer1ProgressBar),this.changePlayer(),this.player1.getGlobal()>=this.scoreToWin&&(window.app.gameStarted=!1,setTimeout(()=>{this.sound.playSound("ryuken-shoryuken.mp3",.1)},500),this.sound.playSound("StreetFighterMusic-Guile.mp3",.5),this.player2.unactivePlayer(),this.player1.activePlayer(),this.player1.flash(),this.elVideoPlayer1Section.style.display="flex",this.elVideoPlayer1.play(),this.elTitleText.textContent=`${this.player1Name}  bravo!`)):(this.sound.playSound("chun-li-laugh.mp3",.1),this.player2.setGlobal(this.player2.getRound()),this.player2.setRound0(),this.elPlayer2GlobalText.textContent=this.player2.getGlobal(),this.elPlayer2RoundText.textContent=this.player2.getRound(),this.player2.flashWin(this.elPlayer2GlobalText),this.player2.progressBar(this.player2.getGlobal(),this.elPlayer2ProgressBar),this.changePlayer(),this.player2.getGlobal()>=this.scoreToWin&&(window.app.gameStarted=!1,setTimeout(()=>{this.sound.playSound("chun-li-kick.mp3",.1)},500),this.sound.playSound("StreetFighterMusic-Guile.mp3",.5),this.player1.unactivePlayer(),this.player2.activePlayer(),this.player2.flash(),this.elVideoPlayer2Section.style.display="flex",this.elVideoPlayer2.play(),this.elTitleText.textContent=`${this.player2Name}  bravo!`))})}}class c{constructor(){this.elRulesModal=document.querySelector(".rules-modal"),this.elOpenRulesModalBtn=document.querySelector(".btn-rules-js"),this.elCloseRulesModalBtn=document.querySelector("#btn-close-rules-modal"),this.elOverlayRules=document.querySelector(".mor-js"),this.elNewGameModal=document.querySelector(".new-game-modal"),this.elOpenNewGameModalBtn=document.querySelector(".btn-new-game"),this.elStartNewGameBtn=document.querySelector("#btn-close-ng-modal"),this.elOverlayNewGame=document.querySelector(".mong-js"),this.sound=new n,this.init()}init(){this.elOpenNewGameModalBtn.classList.add("btn-insist"),this.watchRulesModal(),this.watchNewGameModal()}watchRulesModal(){this.elOpenRulesModalBtn.addEventListener("click",()=>{this.sound.playSound("select.wav"),this.elRulesModal.classList.remove("hide"),this.elRulesModal.classList.add("show"),this.elOverlayRules.classList.add("show")}),this.elCloseRulesModalBtn.addEventListener("click",()=>{this.elRulesModal.classList.remove("show"),this.elRulesModal.classList.add("hide"),this.elOverlayRules.classList.remove("show")})}watchNewGameModal(){this.elOpenNewGameModalBtn.addEventListener("click",()=>{window.app.gameStarted===!1&&(this.sound.playSound("new-game.wav",.8),this.elNewGameModal.classList.remove("hide"),this.elNewGameModal.classList.add("show"),this.elOverlayNewGame.classList.add("show"))}),this.elStartNewGameBtn.addEventListener("click",()=>{this.elNewGameModal.classList.remove("show"),this.elNewGameModal.classList.add("hide"),this.elOverlayNewGame.classList.remove("show"),this.elOpenNewGameModalBtn.classList.remove("btn-insist"),new y,new n})}}window.app={sound:!0,gameStarted:!1};new c;
